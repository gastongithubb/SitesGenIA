<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Nube de Ideas GenIA</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 20px;
      text-align: center;
    }
    h2 {
      color: #2800c8;
      margin-bottom: 10px;
    }
    .idea {
      background: #fff;
      padding: 20px;
      margin: 0 auto;
      max-width: 600px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      display: none;
    }
    .idea.active {
      display: block;
      animation: fadeIn 1s ease-in-out;
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    .idea h3 {
      color: #0F0F72;
      margin-bottom: 5px;
    }
    .idea p {
      margin: 5px 0;
    }
  </style>
</head>
<body>

  <h2>üåü Historias GenIA: Nube de Ideas</h2>
  <div id="ideasContainer"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js"></script>
  <script>
    const ideasFijas = [
      {
        nombre: "Atenci√≥n al Cliente",
        titulo: "Autorizaci√≥n urgente con empat√≠a",
        descripcion: "Respuesta por WhatsApp a un paciente que necesitaba autorizaci√≥n urgente.",
        impacto: "Reducci√≥n del tiempo de respuesta en un 40%."
      },
      {
        nombre: "Atenci√≥n al Cliente",
        titulo: "Consulta sobre cobertura de medicamentos",
        descripcion: "Explicaci√≥n formal y c√°lida sobre cobertura de medicamentos.",
        impacto: "Evit√≥ una segunda consulta."
      },
      {
        nombre: "Atenci√≥n al Cliente",
        titulo: "Reclamo por facturaci√≥n",
        descripcion: "Mensaje claro y asertivo explicando el proceso de revisi√≥n.",
        impacto: "Mejor percepci√≥n del servicio."
      },
      {
        nombre: "Atenci√≥n a Discapacidad",
        titulo: "Transporte cubierto por CUD",
        descripcion: "Respuesta con marco legal y pasos para solicitar el beneficio.",
        impacto: "Acceso sin demoras y con claridad."
      },
      {
        nombre: "Operaciones & CX",
        titulo: "An√°lisis de reclamos con propuesta de mejora",
        descripcion: "Automatizaci√≥n en validaci√≥n de datos.",
        impacto: "Reducci√≥n del 25% en reclamos."
      }
    ];

    const ideasContainer = document.getElementById('ideasContainer');
    let todasLasIdeas = [...ideasFijas];
    let index = 0;

    function mostrarIdea() {
      ideasContainer.innerHTML = '';
      const idea = todasLasIdeas[index];
      const div = document.createElement('div');
      div.className = 'idea active';
      div.innerHTML = `
        <h3>${idea.titulo} ‚Äì ${idea.nombre}</h3>
        <p><strong>Descripci√≥n:</strong> ${idea.descripcion}</p>
        <p><strong>Impacto:</strong> ${idea.impacto}</p>
      `;
      ideasContainer.appendChild(div);
      index = (index + 1) % todasLasIdeas.length;
    }

    function cargarDesdeGoogleSheet() {
      Tabletop.init({
        key: '1QOPB17cKp3y0NNj8CI1DztGEj6jWJ94lYKt9UxDySGE',
        simpleSheet: true,
        callback: function(data) {
          const ideasPublicadas = data.filter(row => row['¬øQuer√©s que tu caso se publique en el sitio?']?.toLowerCase() === 's√≠');
          const ideasFormateadas = ideasPublicadas.map(row => ({
            nombre: row['√Årea'] || 'Sin √°rea',
            titulo: row['Nombre'] || 'Caso compartido',
            descripcion: row['Impacto observado'] || 'Sin descripci√≥n',
            impacto: 'Caso enviado por formulario'
          }));
          todasLasIdeas = [...ideasFijas, ...ideasFormateadas];
        }
      });
    }

    cargarDesdeGoogleSheet();
    mostrarIdea();
    setInterval(mostrarIdea, 8000);
  </script>
</body>
</html>
