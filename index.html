<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Nube de Ideas GenIA</title>
  <style>
    :root {
      --azul-konecta: #2800c8;
      --gris-suave: #fffff;
      --texto: #333;
      --borde: #dcdcdc;
    }

    body {
      font-family: 'Segoe UI', Roboto, sans-serif;
      background: var(--gris-suave);
      margin: 0;
      padding: 40px 20px;
      text-align: center;
    }

    h2 {
      color: var(--azul-konecta);
      font-size: 28px;
      margin-bottom: 20px;
    }

    .idea-card {
      padding: 25px;
      margin: 0 auto;
      max-width: 600px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      display: none;
      text-align: left;
      animation: fadeIn 0.8s ease-in-out;
      color: var(--texto);
    }

    .idea-card.active {
      display: block;
    }

    .idea-card h3 {
      margin-top: 0;
      font-size: 20px;
    }

    .idea-card p {
      margin: 8px 0;
      font-size: 16px;
    }

    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(10px);}
      to {opacity: 1; transform: translateY(0);}
    }

    .color-1 { background: #e6e9ff; border-left: 6px solid #2800c8; }
    .color-2 { background: #e0f7fa; border-left: 6px solid #00acc1; }
    .color-3 { background: #fce4ec; border-left: 6px solid #d81b60; }
    .color-4 { background: #f3e5f5; border-left: 6px solid #8e24aa; }
    .color-5 { background: #fff3e0; border-left: 6px solid #fb8c00; }

    .footer {
      margin-top: 30px;
      font-size: 14px;
      color: #888;
    }

    .boton-formulario {
      margin-top: 20px;
      display: inline-block;
      background-color: #2800c8;
      color: white;
      font-weight: 600;
      padding: 12px 24px;
      border-radius: 8px;
      text-decoration: none;
      transition: background 0.3s ease;
    }

    .boton-formulario:hover {
      background-color: #1e009e;
    }
  </style>
</head>
<body>

  <h2>üåü Historias GenIA: Nube de Ideas</h2>
  <div id="ideasContainer"></div>

  <a class="boton-formulario" href="https://forms.gle/4ecRKfGujkzVv2P98" target="_blank">Compart√≠ tu caso</a>
  <div class="footer">Casos reales + ejemplos testigos para inspirar a todo el equipo</div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js"></script>
  <script>
    const ideasFijas = [
      {
        nombre: "Atenci√≥n al Cliente",
        titulo: "Autorizaci√≥n urgente con empat√≠a",
        descripcion: "Respuesta por WhatsApp a un paciente que necesitaba autorizaci√≥n urgente.",
        impacto: "Reducci√≥n del tiempo de respuesta en un 40%."
      },
      {
        nombre: "Atenci√≥n al Cliente",
        titulo: "Consulta sobre cobertura de medicamentos",
        descripcion: "Explicaci√≥n formal y c√°lida sobre cobertura de medicamentos.",
        impacto: "Evit√≥ una segunda consulta."
      },
      {
        nombre: "Atenci√≥n al Cliente",
        titulo: "Reclamo por facturaci√≥n",
        descripcion: "Mensaje claro y asertivo explicando el proceso de revisi√≥n.",
        impacto: "Mejor percepci√≥n del servicio."
      },
      {
        nombre: "Atenci√≥n a Discapacidad",
        titulo: "Transporte cubierto por CUD",
        descripcion: "Respuesta con marco legal y pasos para solicitar el beneficio.",
        impacto: "Acceso sin demoras y con claridad."
      },
      {
        nombre: "Operaciones & CX",
        titulo: "An√°lisis de reclamos con propuesta de mejora",
        descripcion: "Automatizaci√≥n en validaci√≥n de datos.",
        impacto: "Reducci√≥n del 25% en reclamos."
      }
    ];

    const ideasContainer = document.getElementById('ideasContainer');
    let todasLasIdeas = [];
    let index = 0;

    function mostrarIdea() {
      if (todasLasIdeas.length === 0) return;
      ideasContainer.innerHTML = '';
      const idea = todasLasIdeas[index];
      const colorClass = `color-${(index % 5) + 1}`;
      const div = document.createElement('div');
      div.className = `idea-card active ${colorClass}`;
      div.innerHTML = `
        <h3>${idea.titulo} ‚Äì ${idea.nombre}</h3>
        <p><strong>Descripci√≥n:</strong> ${idea.descripcion}</p>
        <p><strong>Impacto:</strong> ${idea.impacto}</p>
      `;
      ideasContainer.appendChild(div);
      index = (index + 1) % todasLasIdeas.length;
    }

    function iniciarRotacion() {
      mostrarIdea();
      setInterval(mostrarIdea, 8000);
    }

    function cargarDesdeGoogleSheet() {
      Tabletop.init({
        key: '10XU4PMCJeAE5az01DB6jagNZDmigO6xXsV-kTmdMjWA',
        simpleSheet: true,
        callback: function(data) {
          const ideasPublicadas = data.filter(row =>
            row['¬øQuer√©s que tu caso se publique en el sitio?']?.toLowerCase().trim() === 's√≠'
          );
          if (ideasPublicadas.length > 0) {
            todasLasIdeas = ideasPublicadas.map(row => ({
              nombre: row['√Årea'] || 'Sin √°rea',
              titulo: row['Nombre'] || 'Caso compartido',
              descripcion: row['Impacto observado'] || 'Sin descripci√≥n',
              impacto: 'Caso enviado por formulario'
            }));
          } else {
            todasLasIdeas = [...ideasFijas];
          }
          index = 0;
          iniciarRotacion();
        }
      });
    }

    cargarDesdeGoogleSheet();
  </script>
</body>
</html>
